# main
root = '/Users/wimsey/cltk_data'
perseus_root = root + '/greek/text/greek_text_perseus/' # Folder where files reside to read in
tmp_root = root + '/tmp/' # Folder where converted files are written to

theCorpus = {'aeschylus': ['aesch.ag_gk.xml', 'aesch.eum_gk.xml', 'aesch.lib_gk.xml', 'aesch.pers_gk.xml', 'aesch.seven_gk.xml', 'aesch.supp_gk.xml', 'aesch.pb_gk.xml'],
            'sophocles': ['soph.aj_gk.xml', 'soph.ant_gk.xml', 'soph.oc_gk.xml', 'soph.ot_gk.xml', 'soph.phil_gk.xml', 'soph.trach_gk.xml', 'soph.el_gk.xml'],
                'euripides': ['eur.ba_gk.xml', 'eur.el_gk.xml', 'eur.hec_gk.xml', 'eur.her_gk.xml','eur.ia_gk.xml', 'eur.ion_gk.xml', 'eur.it_gk.xml', 'eur.phoen_gk.xml', 'eur.rh_gk.xml', 'eur.supp_gk.xml', 'eur.tro_gk.xml', 'eur.orest_gk.xml'],
                'aristophanes': ['aristoph.ach_gk.xml', 'aristoph.birds_gk.xml', 'aristoph.cl_gk.xml', 'aristoph.eccl_gk.xml', 'aristoph.frogs_gk.xml', 'aristoph.kn_gk.xml', 'aristoph.lys_gk.xml', 'aristoph.peace_gk.xml', 'aristoph.pl_gk.xml', 'aristoph.thes_gk.xml', 'aristoph.wasps_gk.xml']}

# set global variable to 0
line_number = 0
starting_line_number = 0

# Generate Authors and their works from directory structure
#theCorpus = create_dictionary_of_works(perseus_root)

# Iterate through corpus and convert and generate chunks
for author, filenames in theCorpus.items():
    # create bag to put all authors words in
    authors_words = ""
    
    print("Start processing author: {}".format(author))
    for filename in filenames:
        fullpath_filename = os.path.join(perseus_root + str(author) + '/opensource', str(filename))
        print("\tProcessing:\t{}".format(fullpath_filename))

        # Initialize variables
        # set global variable to 0
        line_number = 0
        starting_line_number = 0

        # Read Greek Play xml and create DOM
        dom = parse(fullpath_filename)

        # original filename of play
        playname = os.path.splitext(filename)[0]

        # Extract speakers and lines and convert text to unicode
        converted_play = parseGreekPlay(dom)
    
        # Write converted play out
        plays_words = write_converted_play(author, playname, tmp_root, converted_play)

        # Add this plays words to the authors bag
        authors_words += plays_words + " "
        
        # Write plays Vocabulary words
        plays_bow_write = tmp_root + str(author) + "/" + str(playname) + "_vocab.txt"
        with open(plays_bow_write, 'w') as plays_bow_write:
            plays_bow_write.write(plays_words)
            print("Wrote {}'s Vocabulary for {}.".format(author, playname))

        print("Finished Processing {}:\t{}".format(author, filename))
    
    # Write Authors Vocabulary words
    authors_bow_write = tmp_root + str(author) + "/" + str(author) + "_vocab.txt"
    with open(authors_bow_write, 'w') as authors_bow_write:
        authors_bow_write.write(authors_words)
        print("Wrote {} Vocabulary.".format(author))

    print("Finished processing author: {}".format(author))

print("Program ended")

def read_file(string):
    opened=open(string)
    read=opened.read()
    closed=opened.close()
    return(read)

root = '/Users/wimsey/cltk_data'
perseus_root = root + '/greek/text/greek_text_perseus/' # Folder where files reside to read in
tmp_root = root + '/tmp/' # Folder where converted files are written to

aeschylus=tmp_root + 'aeschylus/aeschylus_author_bag_of_words.txt'
sophocles=tmp_root + 'sophocles/sophocles_author_bag_of_words.txt'
euripides=tmp_root + 'euripides/euripides_author_bag_of_words.txt'
aristophanes=tmp_root + 'aristophanes/aristophanes_author_bag_of_words.txt'


aesch_ag=tmp_root + 'aeschylus/aesch.ag_gk_play_bag_of_words.txt'
aesch_eum=tmp_root + 'aeschylus/aesch.eum_gk_play_bag_of_words.txt'
aesch_lib=tmp_root + 'aeschylus/aesch.lib_gk_play_bag_of_words.txt'
aesch_pb=tmp_root + 'aeschylus/aesch.pb_gk_play_bag_of_words.txt'
aesch_pers=tmp_root + 'aeschylus/aesch.pers_gk_play_bag_of_words.txt'
aesch_seven=tmp_root + 'aeschylus/aesch.seven_gk_play_bag_of_words.txt'
aesch_supp=tmp_root + 'aeschylus/aesch.supp_gk_play_bag_of_words.txt'



soph_aj=tmp_root + 'sophocles/soph.aj_gk_play_bag_of_words.txt'
soph_ant=tmp_root + 'sophocles/soph.ant_gk_play_bag_of_words.txt'
soph_el=tmp_root + 'sophocles/soph.el_gk_play_bag_of_words.txt'
soph_oc=tmp_root + 'sophocles/soph.oc_gk_play_bag_of_words.txt'
soph_ot=tmp_root + 'sophocles/soph.ot_gk_play_bag_of_words.txt'
soph_phil=tmp_root + 'sophocles/soph.phil_gk_play_bag_of_words.txt'
soph_trach=tmp_root + 'sophocles/soph.trach_gk_play_bag_of_words.txt'



eur_ba=tmp_root + 'euripides/eur.ba_gk_play_bag_of_words.txt'
eur_el=tmp_root + 'euripides/eur.el_gk_play_bag_of_words.txt'
eur_hec=tmp_root + 'euripides/eur.hec_gk_play_bag_of_words.txt'
eur_her=tmp_root + 'euripides/eur.her_gk_play_bag_of_words.txt'
eur_ia=tmp_root + 'euripides/eur.ia_gk_play_bag_of_words.txt'
eur_ion=tmp_root + 'euripides/eur.ion_gk_play_bag_of_words.txt'
eur_it=tmp_root + 'euripides/eur.it_gk_play_bag_of_words.txt'
eur_orest=tmp_root + 'euripides/eur.orest_gk_play_bag_of_words.txt'
eur_phoen=tmp_root + 'euripides/eur.phoen_gk_play_bag_of_words.txt'
eur_rh=tmp_root + 'euripides/eur.rh_gk_play_bag_of_words.txt'
eur_supp=tmp_root + 'euripides/eur.supp_gk_play_bag_of_words.txt'
eur_tro=tmp_root + 'euripides/eur.tro_gk_play_bag_of_words.txt'



aristoph_ach=tmp_root + 'aristophanes/aristoph.ach_gk_play_bag_of_words.txt'
aristoph_birds=tmp_root + 'aristophanes/aristoph.birds_gk_play_bag_of_words.txt'
aristoph_cl=tmp_root + 'aristophanes/aristoph.cl_gk_play_bag_of_words.txt'
aristoph_eccl=tmp_root + 'aristophanes/aristoph.eccl_gk_play_bag_of_words.txt'
aristoph_frogs=tmp_root + 'aristophanes/aristoph.frogs_gk_play_bag_of_words.txt'
aristoph_kn=tmp_root + 'aristophanes/aristoph.kn_gk_play_bag_of_words.txt'
aristoph_lys=tmp_root + 'aristophanes/aristoph.lys_gk_play_bag_of_words.txt'
aristoph_wealth=tmp_root + 'aristophanes/aristoph.pl_gk_play_bag_of_words.txt'
aristoph_peace=tmp_root + 'aristophanes/aristoph.peace_gk_play_bag_of_words.txt'
aristoph_thesmo=tmp_root + 'aristophanes/aristoph.thes_gk_play_bag_of_words.txt'
aristoph_wasps=tmp_root + 'aristophanes/aristoph.wasps_gk_play_bag_of_words.txt'
